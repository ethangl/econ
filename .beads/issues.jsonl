{"id":"econ-06z","title":"Derived inputs: slope, salt proximity, cell flux","description":"Compute the derived inputs needed for soil classification. See docs/biomes/soil.md.\n\n1. Slope: max height gradient to any neighbor, normalized 0-1 across map\n   slope[c] = max over neighbors: abs(Heights[c] - Heights[n]) / distance(centers)\n\n2. Salt proximity: BFS from all ocean cells outward across land.\n   saltEffect[c] = max(0, 1 - dist/maxSaltReach) * max(0, 1 - elevAboveSea/saltElevCutoff)\n   maxSaltReach=5 cells, saltElevCutoff=20 height units above sea level\n\n3. Cell flux: average vertex flux onto cells via CellMesh.CellVertices\n   ~3 vertices per cell. Alluvial threshold is 200.\n\nCreate BiomeOps.cs (static class like PrecipitationOps) with methods:\n- ComputeSlope(BiomeData, HeightGrid)\n- ComputeSaltProximity(BiomeData, HeightGrid, CellMesh)\n- ComputeCellFlux(BiomeData, RiverData)\n\nAdd gizmo overlays for slope and salt proximity.","status":"closed","priority":1,"issue_type":"task","owner":"ethangl@users.noreply.github.com","created_at":"2026-02-06T12:28:43.5357-06:00","created_by":"Ethan Leon","updated_at":"2026-02-06T12:39:32.496813-06:00","closed_at":"2026-02-06T12:39:32.496815-06:00","labels":["biomes"],"dependencies":[{"issue_id":"econ-06z","depends_on_id":"econ-mvk","type":"blocks","created_at":"2026-02-06T12:28:43.536734-06:00","created_by":"Ethan Leon"}]}
{"id":"econ-28g","title":"Biome assignment + habitability","description":"Stage 2: Soil -\u003e biome mapping and habitability. See docs/biomes/biomes.md.\n\n18 biomes from 8 soil types via temperature/precipitation selection:\n- Permafrost -\u003e Glacier (temp\u003c-10) or Tundra\n- Saline -\u003e Salt Flat (precip\u003c15) or Coastal Marsh\n- Lithosol -\u003e Alpine Barren (temp\u003c-3 OR elev\u003e85) or Mountain Shrub\n- Alluvial -\u003e Wetland (cellFlux\u003e500 AND slope\u003c0.1) or Floodplain\n- Aridisol -\u003e Hot Desert (temp\u003e25), Cold Desert (temp\u003c5), or Scrubland\n- Laterite -\u003e Tropical Rainforest (precip\u003e80), Dry Forest (precip\u003e70), or Savanna\n- Podzol -\u003e Boreal Forest (temp\u003c5) or Temperate Forest\n- Chernozem -\u003e Woodland (precip\u003e45) or Grassland\n\nHabitability = biome base value + river adjacency bonus.\nRiver bonus: riverBonusMax(15) * sqrt(clamp(maxEdgeFlux/referenceFlux(1000), 0, 1))\nmaxEdgeFlux = max flux across all of cell's Voronoi edges.\n\nAdd biome gizmo overlay (18 distinct colors) and habitability heatmap.\nLog biome distribution stats.","status":"closed","priority":1,"issue_type":"task","owner":"ethangl@users.noreply.github.com","created_at":"2026-02-06T12:29:14.786284-06:00","created_by":"Ethan Leon","updated_at":"2026-02-06T12:43:12.455634-06:00","closed_at":"2026-02-06T12:43:12.455636-06:00","labels":["biomes"],"dependencies":[{"issue_id":"econ-28g","depends_on_id":"econ-lnn","type":"blocks","created_at":"2026-02-06T12:29:14.787331-06:00","created_by":"Ethan Leon"}]}
{"id":"econ-5m0","title":"Movement cost + geological resources","description":"Final BiomeData outputs. See docs/biomes/movement.md and docs/biomes/resources.md.\n\nMovement cost per cell (additive):\n- slopeCost = 1 + slope * slopeWeight(4.0)\n- altitudeCost = max(0, (height-50)/(maxHeight-50)) * altitudeWeight(2.0)\n- groundCost = soil type lookup table (Permafrost=3.0 down to Alluvial/Chernozem=0.5)\n  Wetland biome overrides alluvial ground cost to 2.5\n- vegCost = vegWeight[type] * density (Broadleaf=3.0, Coniferous=2.0, Deciduous=1.5, etc)\n\nPer-edge modifiers (NOT stored in BiomeData, applied at pathfinding time):\n- Elevation change: uphillWeight=0.05, downhillWeight=0.01\n- River crossing: riverCrossingBase=1.0 + fluxNorm * riverFluxWeight=2.0\n\nGeological resources (Perlin noise, independent seeds):\n- Iron: noise\u003e0.6, height\u003e50\n- Gold: noise\u003e0.7, height\u003e50\n- Abundance = (noise - threshold) / (1 - threshold)\n\nStore MovementCost[], IronAbundance[], GoldAbundance[].\nAdd movement cost and ore gizmo overlays.","status":"closed","priority":2,"issue_type":"task","owner":"ethangl@users.noreply.github.com","created_at":"2026-02-06T12:29:46.943833-06:00","created_by":"Ethan Leon","updated_at":"2026-02-06T12:46:16.799724-06:00","closed_at":"2026-02-06T12:46:16.799726-06:00","labels":["biomes"],"dependencies":[{"issue_id":"econ-5m0","depends_on_id":"econ-ha1","type":"blocks","created_at":"2026-02-06T12:29:46.945062-06:00","created_by":"Ethan Leon"}]}
{"id":"econ-ha1","title":"Fauna abundance + subsistence","description":"Stage 4: Fauna and subsistence. See docs/biomes/fauna.md.\n\n4 fauna types computed per-cell:\n- Game: biomeGameBase * vegetationDensity\n- Fur: biomeFurBase * vegDensity * coldBonus (coldBonusThreshold=5C, range=20C)\n- Waterfowl: biomeWaterfowlBase * waterProximity (waterEdgeCount/3)\n- Fish: riverFish + coastalFish + lakeFish + estuaryBonus (see spec for params)\n\nSubsistence = vegetationFood + sum(faunaAbundance * faunaFoodValue) - climatePenalty\nvegetationFood varies by type (grass scaled by fertility, forest by density)\nClimate penalty: (0-temp)*0.02 if temp\u003c0, (temp-35)*0.02 if temp\u003e35\n\nStore FishAbundance[], GameAbundance[], WaterfowlAbundance[], FurAbundance[], Subsistence[].\nAdd fauna and subsistence gizmo overlays.","status":"closed","priority":2,"issue_type":"task","owner":"ethangl@users.noreply.github.com","created_at":"2026-02-06T12:29:34.533258-06:00","created_by":"Ethan Leon","updated_at":"2026-02-06T12:45:28.292001-06:00","closed_at":"2026-02-06T12:45:28.292003-06:00","labels":["biomes"],"dependencies":[{"issue_id":"econ-ha1","depends_on_id":"econ-iho","type":"blocks","created_at":"2026-02-06T12:29:34.534265-06:00","created_by":"Ethan Leon"}]}
{"id":"econ-iho","title":"Vegetation type + density","description":"Stage 3: Vegetation layer. See docs/biomes/vegetation.md.\n\nEach biome maps to a dominant vegetation type (7 types) with a density range.\nDensity = precipFactor * elevationFactor * salinityFactor\n\nprecipFactor: lerp(densityMin, densityMax, precipNorm) where precipNorm normalized within biome's precip range\nelevationFactor: treeline temperature gate with fade range\n  Forest requires temp \u003e= -3, Shrub \u003e= -5, Grass \u003e= -8, Lichen/Moss \u003e= -10\n  Density fades: clamp((temp - treeline_temp) / treeline_fade_range(13), 0, 1)\nsalinityFactor: 1 - 0.5 * saltEffect[c]\n\nStore VegetationType[] and VegetationDensity[] per cell.\nAdd vegetation gizmo (type colors) and density heatmap overlay.","status":"closed","priority":2,"issue_type":"task","owner":"ethangl@users.noreply.github.com","created_at":"2026-02-06T12:29:24.543424-06:00","created_by":"Ethan Leon","updated_at":"2026-02-06T12:44:21.33886-06:00","closed_at":"2026-02-06T12:44:21.338862-06:00","labels":["biomes"],"dependencies":[{"issue_id":"econ-iho","depends_on_id":"econ-28g","type":"blocks","created_at":"2026-02-06T12:29:24.544453-06:00","created_by":"Ethan Leon"}]}
{"id":"econ-lnn","title":"Soil classification + fertility","description":"Priority cascade soil classification and fertility calculation. See docs/biomes/soil.md.\n\nSoil classification (first match wins):\n1. Permafrost: temp \u003c -5\n2. Saline: saltEffect \u003e 0.3\n3. Lithosol: slope \u003e 0.6 OR elev \u003e 80\n4. Alluvial: cellFlux \u003e 200 AND slope \u003c 0.15\n5. Aridisol: precip \u003c 15\n6. Laterite: temp \u003e 20 AND precip \u003e 60\n7. Podzol: temp \u003c 20 AND precip \u003e 30\n8. Chernozem: everything else\n\nFertility calculation:\nfertility = baseFertility[soilType] * rockTypeModifier * (1 + loess) * drainageModifier\ndrainageModifier penalizes moisture extremes for non-alluvial soils.\nClamp to [0,1].\n\nAdd soil gizmo overlay (8 distinct colors) and fertility heatmap overlay.\nAdd stats logging: count per soil type, fertility distribution.","status":"closed","priority":1,"issue_type":"task","owner":"ethangl@users.noreply.github.com","created_at":"2026-02-06T12:29:04.051042-06:00","created_by":"Ethan Leon","updated_at":"2026-02-06T12:42:02.372238-06:00","closed_at":"2026-02-06T12:42:02.37224-06:00","labels":["biomes"],"dependencies":[{"issue_id":"econ-lnn","depends_on_id":"econ-ttz","type":"blocks","created_at":"2026-02-06T12:29:04.052109-06:00","created_by":"Ethan Leon"}]}
{"id":"econ-mvk","title":"BiomeData container, enums, and Unity shell","description":"Create the data structures and Unity wiring for the biome pipeline.\n\nFiles to create:\n- Assets/Scripts/Core/BiomeData.cs - Container with all per-cell arrays from docs/biomes/README.md spec\n- BiomeGenerator.cs - MonoBehaviour shell (Generate(), Awake(), OnDrawGizmosSelected())\n- Assets/Editor/BiomeGeneratorEditor.cs - Custom inspector with Generate button + stats\n\nEnums (in BiomeData.cs): SoilType(8), RockType(4), VegetationType(7), BiomeId(18)\n\nFollow existing patterns: ClimateData.cs, ClimateGenerator.cs, ClimateGeneratorEditor.cs.\nBiomeGenerator should RequireComponent(RiverGenerator) and get refs to all upstream generators.","status":"closed","priority":1,"issue_type":"task","owner":"ethangl@users.noreply.github.com","created_at":"2026-02-06T12:28:31.865561-06:00","created_by":"Ethan Leon","updated_at":"2026-02-06T12:38:39.19189-06:00","closed_at":"2026-02-06T12:38:39.191892-06:00","labels":["biomes"]}
{"id":"econ-ttz","title":"Rock type layer + loess deposition","description":"Two more derived inputs for soil classification. See docs/biomes/soil.md.\n\n1. Rock type: Single Perlin noise field thresholded into 4 categories.\n   Volcanic \u003e0.75, Limestone 0.50-0.75, Sedimentary 0.25-0.50, Granite \u003c0.25\n   Low frequency (large regions). Seed independently from heightmap.\n   Optional: elevation bias (volcanic higher, sedimentary lower).\n\n2. Loess deposition: Wind-sweep algorithm reusing PrecipitationOps pattern.\n   Sort cells by wind projection, propagate upwind-to-downwind.\n   Source: bare arid/frozen ground (precip\u003c15 OR temp\u003c-5) emits silt (0.3)\n   Orographic capture: rising terrain traps silt (0.5 * slopeFactor)\n   Distance decay: loessDepositRate=0.1\n   Process all wind bands weighted by overlap fraction, normalize to 0-1.\n\nNeed Perlin noise implementation (or use Unity's Mathf.PerlinNoise).\nAdd gizmo overlays for rock type and loess.","status":"closed","priority":1,"issue_type":"task","owner":"ethangl@users.noreply.github.com","created_at":"2026-02-06T12:28:54.914987-06:00","created_by":"Ethan Leon","updated_at":"2026-02-06T12:40:59.203036-06:00","closed_at":"2026-02-06T12:40:59.203041-06:00","labels":["biomes"],"dependencies":[{"issue_id":"econ-ttz","depends_on_id":"econ-06z","type":"blocks","created_at":"2026-02-06T12:28:54.915996-06:00","created_by":"Ethan Leon"}]}
{"id":"econ-uew","title":"Biome rendering: soil+vegetation compositing","description":"Visual rendering of biomes using two-layer compositing. See docs/biomes/vegetation.md Rendering section.\n\ncellColor = lerp(soilColor[soilType], vegetationColor[vegType], vegetationDensity)\n\nSoil colors (base layer): Permafrost=blue-gray, Saline=white/pale, Lithosol=rocky gray, Alluvial=dark brown, Aridisol=sandy yellow, Laterite=red-orange, Podzol=gray-brown, Chernozem=near-black\n\nVegetation colors (overlay): None=transparent, Lichen/Moss=muted gray-green, Grass=gold-green, Shrub=dusty olive, Deciduous=green, Coniferous=dark blue-green, Broadleaf=deep green\n\nThis could be gizmo-based initially or integrated into the existing shader overlay system.\nTwo cells with same biome but different geology should be visually distinct.","status":"closed","priority":3,"issue_type":"task","owner":"ethangl@users.noreply.github.com","created_at":"2026-02-06T12:29:55.816136-06:00","created_by":"Ethan Leon","updated_at":"2026-02-06T13:58:28.794704-06:00","closed_at":"2026-02-06T13:58:28.794704-06:00","close_reason":"Added ColorMode enum (Heightmap/Soil/Biome/CellIndex) to CellMeshVisualizer with soil+vegetation two-layer compositing. Added Scene view hover inspector showing biome info per cell.","labels":["biomes"],"dependencies":[{"issue_id":"econ-uew","depends_on_id":"econ-5m0","type":"blocks","created_at":"2026-02-06T12:29:55.817578-06:00","created_by":"Ethan Leon"}]}
